---
description: 创建或更新游戏设计支柱文档，定义核心设计原则
---

## 用户输入

```text
$ARGUMENTS
```

您**必须**在继续之前考虑用户输入（如果不为空）。

## 概述

您正在帮助游戏设计师创建或更新位于 `.game.design/memory/pillars.md` 的设计支柱文档。这是 GameDesignKit 工作流的第一步，为所有后续设计决策提供指导原则。

此文件是一个**模板**，包含方括号中的占位符标记（例如 `[GAME_NAME]`、`[PILLAR_1_NAME]`、`[CORE_EXPERIENCE_GOAL]`）。您的工作是：(a) 从用户自然语言描述中提取游戏信息和设计支柱，(b) 收集缺失的必需信息，(c) 验证提取质量，(d) 精确填充模板。

遵循此执行流程：

1. 加载 `.game.design/memory/pillars.md` 中的现有模板。
   - 识别每个形式为 `[ALL_CAPS_IDENTIFIER]` 的占位符标记。
   - 模板包含6个核心章节：游戏基本信息、核心体验目标、设计支柱（1-7条）、独特卖点、设计约束、质量标准。
   - 如果文件已存在且包含 AI 生成标记 `<!-- AI Generated by /game.designkit.pillars -->`，检测是否被手动编辑。
   - 如果检测到手动编辑，按照 GameDesignKit 章程规则提供选项：覆盖/追加/取消。

2. 从用户输入中提取/推导占位符的值：
   - **从自然语言中识别**：游戏名称、游戏类型、游戏规模、目标受众、核心体验目标、设计支柱（1-7条）、USP、设计约束、质量标准。
   - **识别设计支柱的技巧**：
     - 支柱是设计原则，不是具体特性（"战斗必须提供即时反馈" ✅ vs "有20种武器" ❌）
     - 关键词："核心是..."、"必须确保..."、"最重要的是..."、"作为指导原则..."
     - 从核心玩法推导：如"快节奏战斗 + 深度策略" → 可能的支柱："战斗节奏要快"、"策略深度要高"
   - **推断游戏规模**：根据描述复杂度、团队规模线索（"小团队"→独立，"原型"→小型，"3A"→中大型）。
   - **必需信息**：游戏名称、游戏类型、游戏规模、至少1条设计支柱。
   - 如果缺失必需信息，针对性提问（只问缺失项，一次最多2-3个问题）。
   - 对于可选信息（目标受众、USP、约束、质量标准），优先推断，推断不出可留空或提问。

3. 验证提取的设计支柱质量：
   - **具体性**：描述长度 ≥ 20字，包含具体机制，避免空话（"有趣"、"高质量"）。拒绝标准：<20字或纯空话。
   - **无冲突**：语义重复度 < 80%，无逻辑矛盾。拒绝标准：明显重复或冲突。
   - **维度覆盖**：覆盖多个维度（玩法、叙事、美术、技术、UX）。警告标准：仅聚焦单一维度。
   - **数量合理性**：小型1-2条，独立2-4条，中大型4-7条。如超过7条警告失焦，如少于1条拒绝。
   - 如果验证失败，明确指出问题，提供改进建议，要求用户补充描述。

4. 起草更新的 pillars.md 内容：
   - 用具体值替换每个占位符（不留下括号标记）。
   - 删除未使用的支柱章节（如只有3条支柱，删除支柱4-7的完整章节）。
   - 保留模板的标题层次结构和格式。
   - 正确转义 Markdown 特殊字符。
   - 移除 HTML 注释指导（已填充后不需要）。

5. 一致性传播检查清单（将先前的检查清单转换为主动验证）：
   - 阅读 `.game.design/templates/plan-template.md` 确保任何"章程检查"与设计支柱要求一致。
   - 阅读 `.game.design/templates/spec-template.md` 确保规范模板要求引用 pillars.md。
   - 阅读 `.game.design/templates/tasks-template.md` 确保任务模板考虑支柱驱动的设计验证。
   - 阅读 `.specify/templates/commands/*.md` 中的其他命令文件，确保都引用 pillars.md 作为设计依据。
   - 阅读任何运行时指导文档（例如，`README.md`、`docs/quickstart.md` 或代理特定的指导文件如果存在）。更新对更改的原则的引用。

6. 最终输出前的验证：
   - 没有剩余的未填充占位符。
   - 版本号正确（首次创建为1.0.0，更新时根据语义版本规则递增）。
   - 日期为 ISO 格式 YYYY-MM-DD。
   - 所有必需章节已填写。
   - 支柱具体、无冲突、覆盖关键维度。

7. 将完成的文档写回 `.game.design/memory/pillars.md`（覆盖）。
   - 添加 AI 生成标记（在标题后第一行）：
     ```markdown
     <!-- AI Generated by /game.designkit.pillars -->
     <!-- Created: YYYY-MM-DDTHH:MM:SSZ -->
     <!-- Last AI Update: YYYY-MM-DDTHH:MM:SSZ -->
     ```
   - 如果目录不存在，先创建 `mkdir -p .game.design/memory/`。

8. 向用户输出最终摘要：
   - 文件位置。
   - 支柱数量和质量检查结果。
   - 下一步建议：运行 `/game.designkit.specify` 开始创建功能规范。

格式和样式要求：

- 使用完全按照模板中的 Markdown 标题（不要降级/升级级别）。
- 在章节之间保留单个空行。
- 避免尾随空格。

边缘情况处理：

| 情况 | 处理方式 |
|------|---------|
| 用户描述中识别出超过7条支柱 | 警告"支柱过多可能导致设计失焦"，建议合并或聚焦 |
| 未识别到任何支柱 | 提问"请描述您游戏的核心设计理念或原则" |
| 支柱过于模糊（<20字或纯空话） | 指出问题，提供改进示例，要求补充描述 |
| 支柱相互冲突 | 标记冲突点，说明原因，要求解决 |
| 游戏规模与支柱数量不匹配 | 给出建议但允许用户保留（如小型游戏有5条支柱时建议聚焦） |
| pillars.md 已存在且被手动编辑 | 提供覆盖/追加/取消选项 |
| 用户提供的值包含特殊字符 | 正确转义 Markdown 特殊字符 |

示例用法：

```
/game.designkit.pillars 我想做一个Roguelike卡牌游戏《深渊之心》。核心玩法是快节奏的卡牌战斗和深度的卡组构筑。最重要的设计原则是：战斗必须紧张刺激但公平，策略深度要高但学习曲线平缓，每次游玩都有新的发现和惊喜。目标玩家是喜欢《杀戮尖塔》的硬核玩家。
```

AI 从描述中提取游戏信息和3条支柱，推断规模为"独立"，只需确认："我识别出您的游戏规模是独立游戏，建议2-4条支柱。是否还有其他设计原则？"

如果用户提供部分更新（例如只想修改某条支柱），仍需执行验证步骤。

如果关键信息缺失且无法推断（游戏名称、类型、规模），必须提问而不是留空。

不要创建新模板；始终对现有的 `.game.design/memory/pillars.md` 文件进行操作。

---

**命令版本**：1.0.0
**更新日期**：2025-10-24
