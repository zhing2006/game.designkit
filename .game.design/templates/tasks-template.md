---
description: "功能实施的任务列表模板"
---

# 任务：[功能名称]

**输入**：来自 `/gamedesigns/[dk-###-feature-name]/` 的设计文档
**前置条件**：plan.md（必需）、spec.md（用户故事必需）、research.md、quickstart.md

**注意**：游戏策划工作通过实际使用验证，不生成测试代码任务。

**组织**：任务按用户故事分组，以实现每个故事的独立实施和测试。

## 格式：`[ID] [P?] [Story] 描述`
- **[P]**：可以并行运行（不同文件，无依赖）
- **[Story]**：此任务属于哪个用户故事（例如，US1、US2、US3）
- 在描述中包含确切的文件路径

## 路径约定
- **工作流文档**：`gamedesigns/[dk-###-feature]/` （spec.md、plan.md、tasks.md）
- **设计文档输出**：`docs/[feature-name]/` （gameplay-design.md、numerical-framework.md 等）
- 下面显示的路径根据 plan.md 的设计产物清单调整

<!--
  ============================================================================
  IMPORTANT: The tasks below are SAMPLE TASKS for illustration purposes only.

  The /game.designkit.tasks command MUST replace these with actual tasks based on:
  - User stories from spec.md (with their priorities P1, P2, P3...)
  - Design deliverables from plan.md
  - Design decisions from research.md
  - Usage scenarios from quickstart.md

  Tasks MUST be organized by user story so each story can be:
  - Implemented independently
  - Tested independently
  - Delivered as an MVP increment

  DO NOT keep these sample tasks in the generated tasks.md file.
  ============================================================================
-->

## 第 1 阶段：设置（准备工作）

**目的**：验证环境和准备设计文档目录

- [ ] S001 [P] 验证参考文档存在：检查 gamedesigns/XXX-*/plan.md、spec.md 文件
- [ ] S002 [P] 创建设计文档目录：创建 docs/[feature-name]/ 目录

---

## 第 2 阶段：基础（可选 - 如有全局依赖）

**目的**：所有用户故事依赖的全局设计内容（如需要）

**注意**：游戏设计通常无需基础阶段，直接进入用户故事。如有全局设计支柱或框架需求，可在此定义。

基础任务示例（根据项目调整，通常为空）：

- [ ] T001 读取全局设计支柱：从 .game.design/memory/pillars.md 提取设计原则（如需要）

**检查点**：基础就绪 - 用户故事设计现在可以并行开始

---

## 第 3 阶段：用户故事 1 - [标题]（优先级：P1）🎯 MVP

**目标**：[简要描述此故事提供的设计内容]

**独立测试**：[如何验证此故事的设计完成 - 例如文档是否完整、可读]

### 用户故事 1 的设计任务

- [ ] T001 [P] [US1] 编写玩法设计文档：创建 docs/[feature-name]/gameplay-design.md，描述玩法机制、操作流程、反馈系统
- [ ] T002 [P] [US1] 设计数值框架：创建 docs/[feature-name]/numerical-framework.md，设计公式、成长曲线、平衡参数（如涉及数值）
- [ ] T003 [US1] 填充系统集成：创建 docs/[feature-name]/system-integration.md，说明系统间交互（如涉及多系统）

**检查点**：此时，用户故事 1 的设计文档应该完整并可独立审查

---

## 第 4 阶段：用户故事 2 - [标题]（优先级：P2）

**目标**：[简要描述此故事提供的设计内容]

**独立测试**：[如何验证此故事的设计完成]

### 用户故事 2 的设计任务

- [ ] T004 [P] [US2] 编写设计文档：创建 docs/[feature-name]/[doc-type].md
- [ ] T005 [US2] 补充相关设计：更新已有文档或新增设计细节

**检查点**：此时，用户故事 1 和 2 的设计都应该独立完整

---

## 第 5 阶段：用户故事 3 - [标题]（优先级：P3）

**目标**：[简要描述此故事提供的设计内容]

**独立测试**：[如何验证此故事的设计完成]

### 用户故事 3 的设计任务

- [ ] T006 [P] [US3] 编写设计文档：创建 docs/[feature-name]/[doc-type].md

**检查点**：所有用户故事的设计现在都应该独立完整

---

[根据需要添加更多用户故事阶段，遵循相同的模式]

---

## 第 N 阶段：润色和跨领域关注点

**目的**：影响多个用户故事的改进

- [ ] TXXX [P] 审查所有设计文档的一致性
- [ ] TXXX 补充设计文档间的交叉引用
- [ ] TXXX 验证设计与支柱的对齐度
- [ ] TXXX 根据实际使用反馈调整设计

---

## 依赖关系和执行顺序

### 阶段依赖

- **设置（第 1 阶段）**：无依赖 - 可以立即开始
- **基础（第 2 阶段）**：依赖设置完成 - 阻塞所有用户故事
- **用户故事（第 3+ 阶段）**：全部依赖基础阶段完成
  - 用户故事然后可以并行进行（如果有人员）
  - 或按优先级顺序依次进行（P1 → P2 → P3）
- **润色（最终阶段）**：依赖所有所需用户故事完成

### 用户故事依赖

- **用户故事 1（P1）**：可在基础（第 2 阶段）后开始 - 不依赖其他故事
- **用户故事 2（P2）**：可在基础（第 2 阶段）后开始 - 可能与 US1 集成，但应可独立测试
- **用户故事 3（P3）**：可在基础（第 2 阶段）后开始 - 可能与 US1/US2 集成，但应可独立测试

### 每个用户故事内部

- 测试（如果包括）必须在实施之前编写并失败
- 服务之前的模型
- 端点之前的服务
- 集成之前的核心实施
- 移动到下一个优先级之前完成故事

### 并行机会

- 所有标记为 [P] 的设置任务可以并行运行
- 所有标记为 [P] 的基础任务可以并行运行（在第 2 阶段内）
- 基础阶段完成后，所有用户故事可以并行开始（如果团队容量允许）
- 故事中标记为 [P] 的所有测试可以并行运行
- 故事中标记为 [P] 的模型可以并行运行
- 不同的用户故事可以由不同的团队成员并行工作

---

## 并行示例：用户故事 1

```bash
# 一起启动用户故事 1 的所有测试（如果请求测试）：
Task: "tests/contract/test_[name].py 中 [端点] 的契约测试"
Task: "tests/integration/test_[name].py 中 [用户旅程] 的集成测试"

# 一起启动用户故事 1 的所有模型：
Task: "在 src/models/[entity1].py 中创建 [Entity1] 模型"
Task: "在 src/models/[entity2].py 中创建 [Entity2] 模型"
```

---

## 实施策略

### MVP 优先（仅用户故事 1）

1. 完成第 1 阶段：设置
2. 完成第 2 阶段：基础（关键 - 阻塞所有故事）
3. 完成第 3 阶段：用户故事 1
4. **停止并验证**：独立测试用户故事 1
5. 如果准备好则部署/演示

### 增量交付

1. 完成设置 + 基础 → 基础就绪
2. 添加用户故事 1 → 独立测试 → 部署/演示（MVP！）
3. 添加用户故事 2 → 独立测试 → 部署/演示
4. 添加用户故事 3 → 独立测试 → 部署/演示
5. 每个故事在不破坏先前故事的情况下增加价值

### 并行团队策略

多个开发人员：

1. 团队一起完成设置 + 基础
2. 基础完成后：
   - 开发者 A：用户故事 1
   - 开发者 B：用户故事 2
   - 开发者 C：用户故事 3
3. 故事独立完成并集成

---

## 注意事项

- [P] 任务 = 不同文件，无依赖
- [Story] 标签将任务映射到特定用户故事以便追溯
- 每个用户故事应该可以独立完成和测试
- 在实施之前验证测试失败
- 在每个任务或逻辑组后提交
- 在任何检查点停止以独立验证故事
- 避免：模糊任务、相同文件冲突、破坏独立性的跨故事依赖